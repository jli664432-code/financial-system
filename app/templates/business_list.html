{% extends "base.html" %}
{% block title %}ä¸šåŠ¡æµç¨‹åˆ—è¡¨ - è´¢åŠ¡è®°è´¦ç³»ç»Ÿ{% endblock %}

{% block content %}
<h2>ğŸ“‹ ä¸šåŠ¡æµç¨‹åˆ—è¡¨</h2>
<p class="text-muted">æŸ¥çœ‹æ‰€æœ‰ä¸šåŠ¡å•æ®</p>

<div class="d-flex gap-2 mb-4">
    <a href="/business/sales/new" class="btn">â• åˆ›å»ºé”€å”®å•</a>
    <a href="/business/purchases/new" class="btn">â• åˆ›å»ºé‡‡è´­å•</a>
    <a href="/business/expenses/new" class="btn">â• åˆ›å»ºè´¹ç”¨å•</a>
    <a href="/business/cashflow/new" class="btn">â• åˆ›å»ºæ”¶ä»˜æ¬¾å•</a>
</div>

{% if error %}
<div class="alert alert-danger" role="alert">
    {{ error }}
</div>
{% endif %}

{% if documents %}
<table class="table">
    <thead>
        <tr>
            <th>å•æ®ç¼–å·</th>
            <th>å•æ®ç±»å‹</th>
            <th>ä¸šåŠ¡æ—¥æœŸ</th>
            <th>å¾€æ¥å•ä½</th>
            <th>é‡‘é¢</th>
            <th>çŠ¶æ€</th>
            <th>æ“ä½œ</th>
        </tr>
    </thead>
    <tbody>
        {% for doc in documents %}
        <tr>
            <td>{{ doc.doc_no or '-' }}</td>
            <td>
                {% if doc.doc_type == 'SALE' %}é”€å”®
                {% elif doc.doc_type == 'PURCHASE' %}é‡‡è´­
                {% elif doc.doc_type == 'EXPENSE' %}è´¹ç”¨
                {% elif doc.doc_type == 'CASHFLOW' %}æ”¶ä»˜æ¬¾
                {% else %}{{ doc.doc_type }}{% endif %}
            </td>
            <td>{{ doc.doc_date }}</td>
            <td>{{ doc.partner_name or '-' }}</td>
            <td>{{ "%.2f"|format(doc.total_amount) }}</td>
            <td>
                <span class="badge bg-success">{{ doc.status }}</span>
            </td>
            <td>
                <a href="/transactions/{{ doc.transaction_guid }}" class="btn btn-sm">æŸ¥çœ‹å‡­è¯</a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info" role="alert">
    æš‚æ— ä¸šåŠ¡å•æ®ï¼Œè¯·åˆ›å»ºæ–°çš„ä¸šåŠ¡å•æ®ã€‚
</div>
{% endif %}
{% endblock %}

