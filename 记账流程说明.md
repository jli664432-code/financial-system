# 财务管理系统记账流程说明

## 📚 核心概念

### 1. 复式记账法
这个系统采用**复式记账法**，每一笔业务都会同时影响至少两个科目，并且**借贷必相等**。

**简单理解**：
- **借方（借）**：资产增加、费用增加、负债减少、收入减少
- **贷方（贷）**：资产减少、费用减少、负债增加、收入增加
- **规则**：有借必有贷，借贷必相等

### 2. 业务流程 vs 会计凭证
- **业务流程**：您日常的业务操作（销售、采购、费用报销等）
- **会计凭证**：系统自动将业务流程转换为标准的会计凭证

## 🔄 记账流程（以销售为例）

### 第一步：创建业务单据

访问业务流程页面，选择"销售业务单据"，填写：

1. **基本信息**：
   - 业务日期：2025-11-20
   - 往来单位：客户名称（如"校园小卖部"）
   - 摘要说明：业务描述（如"卖了两箱水"）

2. **业务明细**（核心部分）：
   每条明细描述一对借贷关系：

   **示例：销售商品并收到现金**
   
   **明细1：确认收入**
   - 借方科目：应收账款（或银行存款）
   - 贷方科目：主营业务收入
   - 金额：200元
   - 描述：销售收入

   **明细2：结转成本**（如果有库存）
   - 借方科目：主营业务成本
   - 贷方科目：库存商品
   - 金额：100元
   - 描述：结转成本

### 第二步：系统自动处理

当您提交业务单据后，系统会自动：

1. **生成会计凭证**：
   ```
   凭证号：XS-20251120-001
   日期：2025-11-20
   摘要：卖了两箱水
   
   分录1：借 银行存款 200元
   分录2：贷 主营业务收入 200元
   ```

2. **更新科目余额**：
   - 银行存款余额 +200元
   - 主营业务收入余额 -200元（收入是贷方，负数表示收入增加）

3. **记录现金流量**：
   - 如果涉及现金/银行科目，系统会记录现金流量分类
   - 用于生成现金流量表

## 📋 四种业务流程类型

### 1. 销售业务（SALE）
**场景**：向客户销售商品或提供服务

**典型分录**：
- 借：银行存款 / 应收账款
- 贷：主营业务收入

**示例**：
```
销售商品，收到现金200元
借：银行存款 200
贷：主营业务收入 200
```

### 2. 采购业务（PURCHASE）
**场景**：从供应商采购商品或服务

**典型分录**：
- 借：库存商品 / 费用科目
- 贷：银行存款 / 应付账款

**示例**：
```
采购办公用品，现金支付100元
借：办公费用 100
贷：银行存款 100
```

### 3. 费用报销（EXPENSE）
**场景**：员工报销费用

**典型分录**：
- 借：各种费用科目
- 贷：银行存款 / 其他应付款

**示例**：
```
报销差旅费500元
借：差旅费 500
贷：银行存款 500
```

### 4. 收付款业务（CASHFLOW）
**场景**：单纯的收付款，不涉及收入或费用

**典型分录**：
- 借：银行存款
- 贷：应收账款（收款）
- 或：借：应付账款，贷：银行存款（付款）

**示例**：
```
收到客户欠款1000元
借：银行存款 1000
贷：应收账款 1000
```

## 💡 关键要点

### 1. 每条明细 = 一对借贷科目

在业务单据中，每条明细必须包含：
- **借方科目**：钱从哪里来（或资产增加）
- **贷方科目**：钱到哪里去（或负债增加）
- **金额**：必须是正数

### 2. 系统自动平衡检查

系统会确保：
- 所有明细的借方金额总和 = 贷方金额总和
- 如果不平衡，系统会拒绝保存

### 3. 现金流量分类

如果业务涉及**现金**或**银行**科目，必须选择现金流量分类：
- **经营活动**：日常经营产生的现金流
- **投资活动**：购买资产、投资等
- **筹资活动**：借款、还款、股东投资等

### 4. 科目余额自动更新

系统会自动更新每个科目的余额：
- **资产类科目**：借方为正，贷方为负
- **负债类科目**：借方为负，贷方为正
- **收入类科目**：借方为负，贷方为正（负数表示收入）
- **费用类科目**：借方为正，贷方为负

## 🎯 实际案例

### 案例1：销售商品收到现金

**业务场景**：向客户销售商品，收到现金200元

**业务单据填写**：
- 业务日期：2025-11-20
- 往来单位：校园小卖部
- 摘要：卖了两箱水
- 现金流量分类：经营活动-销售商品收到的现金

**明细1**：
- 借方：银行存款
- 贷方：主营业务收入
- 金额：200元

**系统自动生成**：
```
凭证号：XS-20251120-001
日期：2025-11-20
摘要：卖了两箱水

分录1：借 银行存款 200元
分录2：贷 主营业务收入 200元
```

**科目余额变化**：
- 银行存款：+200元
- 主营业务收入：-200元（负数表示收入增加）

### 案例2：采购商品支付现金

**业务场景**：采购办公用品，现金支付100元

**业务单据填写**：
- 业务类型：采购业务
- 业务日期：2025-11-20
- 往来单位：办公用品店
- 摘要：采购办公用品

**明细1**：
- 借方：办公费用
- 贷方：银行存款
- 金额：100元

**系统自动生成**：
```
凭证号：CG-20251120-001
日期：2025-11-20
摘要：采购办公用品

分录1：借 办公费用 100元
分录2：贷 银行存款 100元
```

**科目余额变化**：
- 办公费用：+100元
- 银行存款：-100元

### 案例3：费用报销

**业务场景**：员工报销差旅费500元

**业务单据填写**：
- 业务类型：费用报销
- 业务日期：2025-11-20
- 往来单位：张三
- 摘要：差旅费报销

**明细1**：
- 借方：差旅费
- 贷方：银行存款
- 金额：500元

**系统自动生成**：
```
凭证号：FY-20251120-001
日期：2025-11-20
摘要：差旅费报销

分录1：借 差旅费 500元
分录2：贷 银行存款 500元
```

## 📊 查看记账结果

记账完成后，您可以：

1. **查看业务单据列表**：`/business/list`
   - 查看所有已创建的业务单据

2. **查看交易凭证列表**：`/transactions/view`
   - 查看系统自动生成的会计凭证

3. **查看科目余额**：`/reports/balances`
   - 查看每个科目的当前余额

4. **查看会计报表**：`/reports/financial`
   - 资产负债表
   - 利润表
   - 现金流量表

## ⚠️ 常见错误

### 错误1：借贷不平衡
**问题**：明细的借方金额总和 ≠ 贷方金额总和
**解决**：检查每条明细的金额，确保借贷相等

### 错误2：缺少现金流量分类
**问题**：涉及现金/银行科目但未选择现金流量分类
**解决**：在单据或明细中选择现金流量分类

### 错误3：科目选择错误
**问题**：选择了错误的科目
**解决**：确认科目类型是否正确（资产、负债、收入、费用）

## 🎓 学习建议

1. **从简单开始**：先练习简单的收付款业务
2. **理解借贷关系**：理解每个业务对应的借贷科目
3. **查看凭证**：记账后查看系统生成的凭证，理解转换过程
4. **查看报表**：定期查看报表，理解数据如何汇总

## 📝 总结

这个系统的核心思想是：
1. **您只需要描述业务**（销售、采购、费用等）
2. **系统自动转换为会计凭证**
3. **系统自动更新科目余额**
4. **系统自动生成财务报表**

您不需要手动创建会计凭证，只需要按照业务逻辑填写业务单据即可！

